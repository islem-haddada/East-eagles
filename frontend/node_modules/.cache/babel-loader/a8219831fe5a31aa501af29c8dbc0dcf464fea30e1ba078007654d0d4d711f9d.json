{"ast":null,"code":"import _objectSpread from\"/home/chef/Desktop/Dev/beautiful minds/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{memberAPI}from'../../services/api';import'./RegistrationForm.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RegistrationForm=()=>{const[formData,setFormData]=useState({first_name:'',last_name:'',email:'',phone:'',student_id:'',field_of_study:''});const[loading,setLoading]=useState(false);const[success,setSuccess]=useState(false);const[error,setError]=useState(null);const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();setLoading(true);setError(null);try{await memberAPI.create(formData);setSuccess(true);setFormData({first_name:'',last_name:'',email:'',phone:'',student_id:'',field_of_study:''});}catch(err){// Prefer server-provided message when available\nconst msg=err&&err.message?err.message:'';if(/email/i.test(msg)||msg.includes('duplicate')||msg.includes('409')){setError('Cet email est déjà utilisé. Veuillez en choisir un autre.');}else if(msg){// Show server message (trim status prefix if present)\nsetError(msg.replace(/^Erreur \\d+:\\s*/i,''));}else{setError('Erreur lors de l\\'inscription. Vérifiez votre connexion et réessayez.');}console.error('Registration error:',err);}finally{setLoading(false);}};if(success){return/*#__PURE__*/_jsxs(\"div\",{className:\"success-message\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u2705 Inscription r\\xE9ussie!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Bienvenue dans notre club scientifique!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Vous recevrez bient\\xF4t un email de confirmation.\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>setSuccess(false),children:\"Nouvelle inscription\"})]});}return/*#__PURE__*/_jsxs(\"form\",{className:\"registration-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Inscription au Club Scientifique\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"first_name\",children:\"Pr\\xE9nom *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"first_name\",name:\"first_name\",value:formData.first_name,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"last_name\",children:\"Nom *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"last_name\",name:\"last_name\",value:formData.last_name,onChange:handleChange,required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",name:\"email\",value:formData.email,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"phone\",children:\"T\\xE9l\\xE9phone\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",id:\"phone\",name:\"phone\",value:formData.phone,onChange:handleChange,placeholder:\"Ex: 0555123456\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"student_id\",children:\"Num\\xE9ro \\xE9tudiant\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"student_id\",name:\"student_id\",value:formData.student_id,onChange:handleChange,placeholder:\"Ex: STU001\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"field_of_study\",children:\"Fili\\xE8re d'\\xE9tudes\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"field_of_study\",name:\"field_of_study\",value:formData.field_of_study,onChange:handleChange,placeholder:\"Ex: Informatique, Math\\xE9matiques...\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:loading,children:loading?'Inscription en cours...':'S\\'inscrire'})]});};export default RegistrationForm;","map":{"version":3,"names":["React","useState","memberAPI","jsx","_jsx","jsxs","_jsxs","RegistrationForm","formData","setFormData","first_name","last_name","email","phone","student_id","field_of_study","loading","setLoading","success","setSuccess","error","setError","handleChange","e","_objectSpread","target","name","value","handleSubmit","preventDefault","create","err","msg","message","test","includes","replace","console","className","children","onClick","onSubmit","htmlFor","type","id","onChange","required","placeholder","disabled"],"sources":["/home/chef/Desktop/Dev/beautiful minds/frontend/src/components/registration/RegistrationForm.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { memberAPI } from '../../services/api';\nimport './RegistrationForm.css';\n\nconst RegistrationForm = () => {\n  const [formData, setFormData] = useState({\n    first_name: '',\n    last_name: '',\n    email: '',\n    phone: '',\n    student_id: '',\n    field_of_study: ''\n  });\n\n  const [loading, setLoading] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const [error, setError] = useState(null);\n\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n\n    try {\n      await memberAPI.create(formData);\n      setSuccess(true);\n      setFormData({\n        first_name: '',\n        last_name: '',\n        email: '',\n        phone: '',\n        student_id: '',\n        field_of_study: ''\n      });\n    } catch (err) {\n      // Prefer server-provided message when available\n      const msg = err && err.message ? err.message : '';\n      if (/email/i.test(msg) || msg.includes('duplicate') || msg.includes('409')) {\n        setError('Cet email est déjà utilisé. Veuillez en choisir un autre.');\n      } else if (msg) {\n        // Show server message (trim status prefix if present)\n        setError(msg.replace(/^Erreur \\d+:\\s*/i, ''));\n      } else {\n        setError('Erreur lors de l\\'inscription. Vérifiez votre connexion et réessayez.');\n      }\n      console.error('Registration error:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (success) {\n    return (\n      <div className=\"success-message\">\n        <h2>✅ Inscription réussie!</h2>\n        <p>Bienvenue dans notre club scientifique!</p>\n        <p>Vous recevrez bientôt un email de confirmation.</p>\n        <button className=\"btn btn-primary\" onClick={() => setSuccess(false)}>\n          Nouvelle inscription\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <form className=\"registration-form\" onSubmit={handleSubmit}>\n      <h2>Inscription au Club Scientifique</h2>\n      \n      {error && <div className=\"error\">{error}</div>}\n      \n      <div className=\"form-row\">\n        <div className=\"form-group\">\n          <label htmlFor=\"first_name\">Prénom *</label>\n          <input\n            type=\"text\"\n            id=\"first_name\"\n            name=\"first_name\"\n            value={formData.first_name}\n            onChange={handleChange}\n            required\n          />\n        </div>\n\n        <div className=\"form-group\">\n          <label htmlFor=\"last_name\">Nom *</label>\n          <input\n            type=\"text\"\n            id=\"last_name\"\n            name=\"last_name\"\n            value={formData.last_name}\n            onChange={handleChange}\n            required\n          />\n        </div>\n      </div>\n\n      <div className=\"form-group\">\n        <label htmlFor=\"email\">Email *</label>\n        <input\n          type=\"email\"\n          id=\"email\"\n          name=\"email\"\n          value={formData.email}\n          onChange={handleChange}\n          required\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label htmlFor=\"phone\">Téléphone</label>\n        <input\n          type=\"tel\"\n          id=\"phone\"\n          name=\"phone\"\n          value={formData.phone}\n          onChange={handleChange}\n          placeholder=\"Ex: 0555123456\"\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label htmlFor=\"student_id\">Numéro étudiant</label>\n        <input\n          type=\"text\"\n          id=\"student_id\"\n          name=\"student_id\"\n          value={formData.student_id}\n          onChange={handleChange}\n          placeholder=\"Ex: STU001\"\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label htmlFor=\"field_of_study\">Filière d'études</label>\n        <input\n          type=\"text\"\n          id=\"field_of_study\"\n          name=\"field_of_study\"\n          value={formData.field_of_study}\n          onChange={handleChange}\n          placeholder=\"Ex: Informatique, Mathématiques...\"\n        />\n      </div>\n\n      <button \n        type=\"submit\" \n        className=\"btn btn-primary\" \n        disabled={loading}\n      >\n        {loading ? 'Inscription en cours...' : 'S\\'inscrire'}\n      </button>\n    </form>\n  );\n};\n\nexport default RegistrationForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}